import ee from"./BgtieSPD.js";import{_ as ne}from"./XPM9xSWw.js";import{g as pe,h as A,o as r,w as S,y as i,B as ae,C as Q,k as u,l as be,X as ye,D as ve,G as p,Y as X,Z as Y,q as k,P as he,K as O,J as Me,a as q,c as m,f,b as h,x as R,v as B,T as Ie,F as Ce,r as Ae,Q as Se,t as T,d as Z,H as ke}from"./BwO4JJof.js";import{i as Oe,r as qe,u as Be,n as Ve,l as we}from"./BsrLagsS.js";import{s as ze}from"./Dvt5nLqV.js";import{d as He}from"./x2XWGV6h.js";import{i as _}from"./CfIzpCDP.js";import{u as x,i as je,a as $e}from"./DN3pGxWa.js";import{u as Ne}from"./CB9-D4M5.js";import{u as Ue}from"./BiVoi4sv.js";import{a as Fe}from"./BInu6rUN.js";import{_ as Ee}from"./DlAUqK2U.js";import"./DodNO2Ui.js";import"./CDWv2em4.js";import"./Bm92f-5u.js";import"./CxIZtCgj.js";import"./B5zLmhx8.js";import"./CKU8hLjh.js";import"./CrM_gZ-l.js";import"./DHlO-M72.js";import"./CD3PW12_.js";import"./B2O6VFkS.js";const c=ae(p.ui.strategy,p.ui.input,je),W=ae(p.ui.strategy,p.ui.inputMenu,$e),De=pe({components:{HCombobox:we,HComboboxButton:Ve,HComboboxOptions:Be,HComboboxOption:qe,HComboboxInput:Oe,UIcon:ee,UAvatar:ne},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array],default:""},query:{type:String,default:null},by:{type:String,default:void 0},options:{type:Array,default:()=>[]},id:{type:String,default:null},name:{type:String,default:null},required:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>c.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>W.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedIcon:{type:String,default:()=>W.default.selectedIcon},disabled:{type:Boolean,default:!1},nullable:{type:Boolean,default:!1},placeholder:{type:String,default:null},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(c.size).includes(e)}},color:{type:String,default:()=>c.default.color,validator(e){return[...p.ui.colors,...Object.keys(c.color)].includes(e)}},variant:{type:String,default:()=>c.default.variant,validator(e){return[...Object.keys(c.variant),...Object.values(c.color).flatMap(g=>Object.keys(g))].includes(e)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:null},search:{type:Function,default:void 0},searchAttributes:{type:Array,default:null},searchLazy:{type:Boolean,default:!1},debounce:{type:Number,default:200},popper:{type:Object,default:()=>({})},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},uiMenu:{type:Object,default:()=>({})}},emits:["update:modelValue","update:query","open","close","change"],setup(e,{emit:g,slots:H}){const{ui:a,attrs:P}=x("input",Q(e,"ui"),c,Q(e,"class")),{ui:j}=x("inputMenu",Q(e,"uiMenu"),W),V=u(()=>he({},e.popper,j.value.popper)),[b,w]=Ne(V.value),{size:$,rounded:N}=Fe({ui:a,props:e}),{emitFormBlur:U,emitFormChange:F,inputId:E,color:l,size:D,name:M}=Ue(e,c),s=u(()=>$.value??D.value),I=u(()=>{if(!e.by)return;if(typeof e.by=="function")return e.by;const n=e.by;return n.indexOf(".")>0?(t,d)=>v(t,n)===v(d,n):n}),J=be(""),y=u({get(){return e.query??J.value},set(n){J.value=n,g("update:query",n)}}),le=u(()=>{if(!e.modelValue)return null;function n(t){return e.valueAttribute?v(t,e.valueAttribute):t}function o(t,d){return I.value&&typeof I.value!="function"&&typeof t=="object"&&typeof d=="object"?_(t[e.by],d[e.by]):_(t,d)}if(e.valueAttribute){const t=L.value.find(d=>{const C=n(d);return o(C,e.modelValue)});return t?v(t,e.optionAttribute):null}else return["string","number"].includes(typeof e.modelValue)?e.modelValue:v(e.modelValue,e.optionAttribute)}),te=u(()=>{var o,t;const n=((t=(o=a.value.color)==null?void 0:o[l.value])==null?void 0:t[e.variant])||a.value.variant[e.variant];return Me(O(a.value.base,a.value.form,N.value,a.value.placeholder,a.value.size[s.value],e.padded?a.value.padding[s.value]:"p-0",n==null?void 0:n.replaceAll("{color}",l.value),(z.value||H.leading)&&a.value.leading.padding[s.value],(K.value||H.trailing)&&a.value.trailing.padding[s.value]),e.inputClass)}),z=u(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),K=u(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),ie=u(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),ue=u(()=>e.loading&&!z.value?e.loadingIcon:e.trailingIcon||e.icon),oe=u(()=>O(a.value.icon.leading.wrapper,a.value.icon.leading.pointer,a.value.icon.leading.padding[s.value])),re=u(()=>O(a.value.icon.base,l.value&&p.ui.colors.includes(l.value)&&a.value.icon.color.replaceAll("{color}",l.value),a.value.icon.size[s.value],e.loading&&a.value.icon.loading)),se=u(()=>O(a.value.icon.trailing.wrapper,a.value.icon.trailing.padding[s.value])),de=u(()=>O(a.value.icon.base,l.value&&p.ui.colors.includes(l.value)&&a.value.icon.color.replaceAll("{color}",l.value),a.value.icon.size[s.value],e.loading&&!z.value&&a.value.icon.loading)),G=e.search&&typeof e.search=="function"?ye(e.search,e.debounce):void 0,L=He(async()=>G?await G(y.value):e.options||[],[],{lazy:e.searchLazy});function ce(n){return n.replace(/[.*+?^${}()|[\]\\]/g,o=>`\\${o}`)}const ge=u(()=>{if(!y.value||G)return L.value;const n=ce(y.value);return L.value.filter(o=>{var t;return((t=e.searchAttributes)!=null&&t.length?e.searchAttributes:[e.optionAttribute]).some(d=>{if(["string","number"].includes(typeof o))return String(o).search(new RegExp(n,"i"))!==-1;const C=Y(o,d);return C!=null&&String(C).search(new RegExp(n,"i"))!==-1})})});ve(w,n=>{n?g("open"):(g("close"),U())});function me(n){y.value="",X(e.modelValue)!==X(n)&&(g("update:modelValue",n),g("change",n),F())}function v(n,o){return Y(n,o)}function fe(n){y.value=n.target.value}return ze(()=>ke()),{ui:a,uiMenu:j,attrs:P,name:M,inputId:E,popper:V,trigger:b,container:w,label:le,isLeading:z,isTrailing:K,inputClass:te,leadingIconName:ie,leadingIconClass:re,leadingWrapperIconClass:oe,trailingIconName:ue,trailingIconClass:de,trailingWrapperIconClass:se,filteredOptions:ge,query:y,accessor:v,onUpdate:me,onQueryChange:fe,by:I}}}),Ge={class:"truncate"};function Le(e,g,H,a,P,j){const V=k("HComboboxInput"),b=ee,w=k("HComboboxButton"),$=ne,N=k("HComboboxOption"),U=k("HComboboxOptions"),F=k("HCombobox");return r(),A(F,{by:e.by,name:e.name,"model-value":e.modelValue,disabled:e.disabled,nullable:e.nullable,as:"div",class:i(e.ui.wrapper),"onUpdate:modelValue":e.onUpdate},{default:S(({open:E})=>[q("div",{class:i(e.uiMenu.trigger)},[h(V,R({id:e.inputId,name:e.name,required:e.required,placeholder:e.placeholder,disabled:e.disabled,class:e.inputClass,autocomplete:"off"},e.attrs,{"display-value":()=>e.query?e.query:e.label,onChange:e.onQueryChange}),null,16,["id","name","required","placeholder","disabled","class","display-value","onChange"]),e.isLeading&&e.leadingIconName||e.$slots.leading?(r(),m("span",{key:0,class:i(e.leadingWrapperIconClass)},[B(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[h(b,{name:e.leadingIconName,class:i(e.leadingIconClass)},null,8,["name","class"])])],2)):f("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(r(),A(w,{key:1,ref:"trigger",class:i(e.trailingWrapperIconClass)},{default:S(()=>[B(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[h(b,{name:e.trailingIconName,class:i(e.trailingIconClass)},null,8,["name","class"])])]),_:3},8,["class"])):f("",!0)],2),E?(r(),m("div",{key:0,ref:"container",class:i([e.uiMenu.container,e.uiMenu.width])},[h(Ie,R({appear:""},e.uiMenu.transition),{default:S(()=>[q("div",null,[e.popper.arrow?(r(),m("div",{key:0,"data-popper-arrow":"",class:i(Object.values(e.uiMenu.arrow))},null,2)):f("",!0),h(U,{static:"",class:i([e.uiMenu.base,e.uiMenu.ring,e.uiMenu.rounded,e.uiMenu.shadow,e.uiMenu.background,e.uiMenu.padding,e.uiMenu.height])},{default:S(()=>[(r(!0),m(Ce,null,Ae(e.filteredOptions,(l,D)=>(r(),A(N,{key:D,as:"template",value:e.valueAttribute?e.accessor(l,e.valueAttribute):l,disabled:l.disabled},{default:S(({active:M,selected:s,disabled:I})=>[q("li",{class:i([e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,M?e.uiMenu.option.active:e.uiMenu.option.inactive,s&&e.uiMenu.option.selected,I&&e.uiMenu.option.disabled])},[q("div",{class:i(e.uiMenu.option.container)},[B(e.$slots,"option",{option:l,active:M,selected:s},()=>[l.icon?(r(),A(b,{key:0,name:l.icon,class:i([e.uiMenu.option.icon.base,M?e.uiMenu.option.icon.active:e.uiMenu.option.icon.inactive,l.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):l.avatar?(r(),A($,R({key:1,ref_for:!0},{size:e.uiMenu.option.avatar.size,...l.avatar},{class:e.uiMenu.option.avatar.base,"aria-hidden":"true"}),null,16,["class"])):l.chip?(r(),m("span",{key:2,class:i(e.uiMenu.option.chip.base),style:Se({background:`#${l.chip}`})},null,6)):f("",!0),q("span",Ge,T(["string","number"].includes(typeof l)?l:e.accessor(l,e.optionAttribute)),1)])],2),s?(r(),m("span",{key:0,class:i([e.uiMenu.option.selectedIcon.wrapper,e.uiMenu.option.selectedIcon.padding])},[h(b,{name:e.selectedIcon,class:i(e.uiMenu.option.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])],2)):f("",!0)],2)]),_:2},1032,["value","disabled"]))),128)),e.query&&!e.filteredOptions.length?(r(),m("p",{key:0,class:i(e.uiMenu.option.empty)},[B(e.$slots,"option-empty",{query:e.query},()=>[Z(T(e.uiMenu.default.optionEmpty.label.replace("{query}",e.query)),1)])],2)):e.filteredOptions.length?f("",!0):(r(),m("p",{key:1,class:i(e.uiMenu.empty)},[B(e.$slots,"empty",{query:e.query},()=>[Z(T(e.uiMenu.default.empty.label),1)])],2))]),_:3},8,["class"])])]),_:3},16)],2)):f("",!0)]),_:3},8,["by","name","model-value","disabled","nullable","class","onUpdate:modelValue"])}const cn=Ee(De,[["render",Le]]);export{cn as default};
